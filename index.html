<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Graduation Party</title>
    <style>
        /* --- ESTILOS GENERALES --- */
        body { margin: 0; padding: 0; overflow: hidden; background-color: #050505; font-family: 'Courier New', Courier, monospace; }
        
        /* 1. PANTALLA DE INICIO (OVERLAY) */
        #start-screen {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(5, 5, 5, 0.85); 
            backdrop-filter: blur(8px); 
            z-index: 9999; 
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: opacity 0.8s ease;
        }

        .start-content {
            text-align: center;
            color: white;
            animation: pulse 2s infinite;
        }

        .start-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 3px;
            color: cyan;
            text-shadow: 0 0 15px cyan;
        }

        .start-hint {
            font-size: 0.9rem;
            color: #ddd;
            font-family: sans-serif;
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 10px 20px;
            border-radius: 30px;
            background: rgba(255,255,255,0.1);
        }

        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }

        /* 2. VISUALIZADOR 3D */
        spline-viewer {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: 1;
        }

        /* --- MENSAJE FLOTANTE (INSTRUCCI√ìN) --- */
        #ui-hint {
            position: fixed;
            bottom: 95px; /* Justo encima de los botones */
            left: 0; 
            width: 100%;
            text-align: center;
            pointer-events: none; /* ¬°Vital! Deja pasar los clics al 3D */
            z-index: 10;
        }

        .hand-text {
            display: inline-block;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(4px);
            padding: 8px 16px;
            border-radius: 20px;
            color: rgba(0, 255, 255, 0.9); /* Cyan Ne√≥n */
            font-family: sans-serif;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            border: 1px solid rgba(0, 255, 255, 0.3);
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.2);
            animation: pulseText 2s infinite;
        }

        @keyframes pulseText { 
            0%, 100% { transform: scale(1); opacity: 0.8; } 
            50% { transform: scale(1.05); opacity: 1; text-shadow: 0 0 10px cyan; } 
        }

        /* 3. BOTONES DE ABAJO (HUD) */
        .hud-container {
            position: absolute;
            bottom: 30px; 
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 8px; 
            z-index: 100;
            width: 95%; 
            max-width: 450px;
            justify-content: center; 
        }

        .cyber-btn {
            background: rgba(20, 10, 40, 0.7); 
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(217, 70, 239, 0.5);
            color: #ffffff;
            padding: 12px 10px; 
            border-radius: 8px;
            text-decoration: none;
            font-weight: 700;
            font-size: 11px;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            display: flex;
            align-items: center;
            justify-content: center;
            flex: 1; 
            transition: all 0.2s;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            user-select: none;
            -webkit-tap-highlight-color: transparent; 
        }

        .cyber-btn:active { transform: scale(0.95); background: rgba(217, 70, 239, 0.4); }
        .btn-reset { border-color: rgba(0, 255, 255, 0.5); }
        .icon { margin-right: 5px; font-size: 1.2em; }

        @media (max-width: 350px) {
            .cyber-btn { font-size: 10px; padding: 10px 5px; }
            .icon { display: none; }
        }

    </style>
</head>
<body>

    <audio id="bgMusic" loop>
        <source src="CYRIL - Stumblin' In (Official Audio).mp3" type="audio/mpeg">
    </audio>
    <audio id="sfxAudio" preload="auto">
        <source src="explosion_voz.mp3" type="audio/mpeg">
    </audio>

    <div id="start-screen" onclick="iniciarFiesta()">
        <div class="start-content">
            <div class="start-title">System Update</div>
            <div class="start-hint">üëÜ Toca para Iniciar</div>
        </div>
    </div>

    <script type="module" src="https://unpkg.com/@splinetool/viewer@1.9.48/build/spline-viewer.js"></script>
    <spline-viewer url="https://prod.spline.design/3dutSB-goIHLUQnT/scene.splinecode"></spline-viewer>

    <div id="ui-hint" style="display: none; opacity: 0; transition: opacity 1s ease;">
        <div class="hand-text">üëÜ Toca la pi√±ata para romperla</div>
    </div>

    <div class="hud-container">
        <button class="cyber-btn btn-reset" onclick="location.reload()">
            <span class="icon">‚Ü∫</span> ROMPER DE NUEVO
        </button>
        
        <a href="https://maps.app.goo.gl/43zsxCDqQWqYnMMd6" target="_blank" class="cyber-btn">
            <span class="icon">üìç</span> MAPS
        </a>

        <a href="https://wa.me/5578520454?text=Con%20gusto%20nos%20vemos%20ahi" target="_blank" class="cyber-btn">
            <span class="icon">üí¨</span> CONFIRMA
        </a>
    </div>

    <script>
        // --- CONFIGURACI√ìN DE AUDIO ---
        var music = document.getElementById("bgMusic");
        var sfx = document.getElementById("sfxAudio");
        var yaExploto = false; 

        music.volume = 0.2; 
        sfx.volume = 1.0;  

        // --- 1. FUNCI√ìN DE INICIO ---
        function iniciarFiesta() {
            console.log("Iniciando experiencia...");

            // A. M√∫sica
            music.play().catch(e => console.log(e));

            // B. Desbloquear SFX
            sfx.muted = true; 
            sfx.play().then(() => {
                sfx.pause();      
                sfx.currentTime = 0; 
                sfx.muted = false;   
            }).catch(e => console.log(e));

            // C. Quitar pantalla de inicio
            var overlay = document.getElementById('start-screen');
            overlay.style.opacity = '0'; 
            
            setTimeout(() => {
                overlay.style.display = 'none';
                
                // --- NUEVO: MOSTRAR INSTRUCCI√ìN AQU√ç ---
                // En cuanto se va la pantalla negra, aparece el texto "Toca la pi√±ata..."
                mostrarInstruccion();
                
            }, 800);
        }

        // --- 2. DETECTOR DE EXPLOSI√ìN ---
        function playExplosion() {
            var overlay = document.getElementById('start-screen');
            
            if (overlay.style.display === 'none' && !yaExploto) {
                
                // --- NUEVO: OCULTAR INSTRUCCI√ìN INMEDIATAMENTE ---
                // El usuario ya obedeci√≥ y dio clic, as√≠ que borramos el texto.
                ocultarInstruccion();

                // Ponemos candado
                yaExploto = true; 
                console.log("Explosi√≥n iniciada...");

                // Reproducimos SFX con retraso de 1.5s
                setTimeout(function() {
                    console.log("¬°BOOM!");
                    sfx.currentTime = 0;
                    sfx.play().catch(e => console.log(e));
                }, 1500); 
            }
        }

        // --- FUNCIONES DE CONTROL DEL MENSAJE FLOTANTE ---
        
        function mostrarInstruccion() {
            var ui = document.getElementById('ui-hint');
            ui.style.display = 'block';
            // Aparecer suave
            setTimeout(() => { ui.style.opacity = '1'; }, 100);
        }

        function ocultarInstruccion() {
            var ui = document.getElementById('ui-hint');
            ui.style.opacity = '0'; // Se desvanece
            // Se quita del mapa despu√©s de desvanecerse
            setTimeout(() => { ui.style.display = 'none'; }, 1000);
        }

        // Listeners
        window.addEventListener('mousedown', playExplosion, { capture: true });
        window.addEventListener('touchstart', playExplosion, { capture: true, passive: false });

    </script>

</body>
</html>
